<!DOCTYPE html>
<html>
<head>
    <title>Image GPS Data</title>
    <script>
        async function readImages() {
            const tableBody = document.getElementById('table-body');
            const fileInputs = document.querySelectorAll('input[type="file"]');

            for (let i = 0; i < fileInputs.length; i++) {
                const files = fileInputs[i].files;
                for (let j = 0; j < files.length; j++) {
                    const file = files[j];
                    if (file.type.startsWith('image/jpeg')) {
                        const exifData = await new Promise((resolve, reject) => {
                            EXIF.getData(file, function () {
                                resolve(EXIF.getAllTags(this));
                            });
                        });

                        let gpsLatitude = '', gpsLongitude = '';
                        if (exifData.GPSLatitude && exifData.GPSLongitude) {
                            gpsLatitude = exifData.GPSLatitude;
                            gpsLongitude = exifData.GPSLongitude;
                        }

                        const row = `
                            <tr>
                                <td>${file.name}</td>
                                <td>${gpsLatitude}</td>
                                <td>${gpsLongitude}</td>
                            </tr>
                        `;
                        tableBody.innerHTML += row;
                    }
                }
            }
        }

        window.onload = function () {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'image/jpeg';
            fileInput.multiple = true;

            fileInput.addEventListener('change', readImages);

            // Append the file input to the body (hidden)
            fileInput.style.display = 'none';
            document.body.appendChild(fileInput);

            // Trigger the file picker
            fileInput.click();
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/exif-js/2.3.0/exif.min.js"></script>
</head>
<body>
    <table border="1">
        <thead>
            <tr>
                <th>Image Name</th>
                <th>GPS Latitude</th>
                <th>GPS Longitude</th>
            </tr>
        </thead>
        <tbody id="table-body">
        </tbody>
    </table>
</body>
</html>
