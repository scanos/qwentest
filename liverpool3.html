<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belfast Pubs Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map { height: 100vh; width: 100%; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Initialize the map
        const map = L.map('map').setView([54.5967, -5.9301], 15); // Centered on Belfast
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);

        // Define pubs array (sorted by distance)
        const pubs = [
            { name: "The Crown Liquor Saloon", lat: 54.5967, long: -5.9301, distance: 0 },
            { name: "The Duke of York", lat: 54.5968, long: -5.9309, distance: 0.05 },
            { name: "The John Hewitt Society", lat: 54.5969, long: -5.9311, distance: 0.06 },
            { name: "The Harp Bar", lat: 54.5971, long: -5.9313, distance: 0.07 },
            { name: "The Dirty Onion", lat: 54.5973, long: -5.9315, distance: 0.08 },
            { name: "The Sunflower Public House", lat: 54.5975, long: -5.9317, distance: 0.09 },
            { name: "The Spaniard Bar", lat: 54.5977, long: -5.9319, distance: 0.10 },
            { name: "The Garrick Bar", lat: 54.5979, long: -5.9321, distance: 0.11 },
            { name: "The Points Bar", lat: 54.5981, long: -5.9323, distance: 0.12 },
            { name: "The Black Bear", lat: 54.5983, long: -5.9325, distance: 0 }
        ];

        let currentIndex = 0;
        let previousMarker = null;

        function addMarker(index) {
            const pub = pubs[index];
            const label = index === 0 ? pub.name : `${pub.name} (${pub.distance.toFixed(2)}M)`;

            // Add marker
            const marker = L.marker([pub.lat, pub.long]).addTo(map).bindPopup(label);
            map.setView([pub.lat, pub.long], 15);

            // Draw line if not the first pub
            if (previousMarker) {
                const polyline = L.polyline([
                    [previousMarker.getLatLng().lat, previousMarker.getLatLng().lng],
                    [marker.getLatLng().lat, marker.getLatLng().lng]
                ], { color: 'blue' }).addTo(map);
            }

            // Remove previous marker if exists
            if (previousMarker) {
                map.removeLayer(previousMarker);
            }

            // Update previous marker
            previousMarker = marker;

            // Add click event to move to next pub
            marker.on('click', () => {
                if (index < pubs.length - 1) {
                    addMarker(index + 1);
                }
            });
        }

        // Start with the first pub
        addMarker(currentIndex);
    </script>
</body>
</html>